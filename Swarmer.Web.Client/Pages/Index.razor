@using Swarmer.Web.Client.Services
@implements IDisposable
@page "/"
@inject DarkModeManager DMM

<PageTitle>Swarmer - Home</PageTitle>

<div class="text-center px-7 md:px-30 lg:text-left">
	<div class="lg:flex lg:justify-between lg:items-center lg:flex-row">
		<div class="lg:max-w-sm">
			<h1 class="text-4xl">Swarmer</h1>
			<h2 class="mt-1 text-gray-600 dark:text-gray-400">
				A bot for the DD Pals Discord server that notifies when a
				<a class="custom-link font-semibold" target="_blank" href="https://store.steampowered.com/app/422970/Devil_Daggers/">Devil Daggers</a>
				stream comes on.
			</h2>
		</div>
		<div class="flex justify-center">
			<img class="rounded-lg shadow-lg mt-6 lg:mt-0 dark:shadow-gray-600/60" src="@(_darkMode ? "Assets/SwarmerInAction.png" : "Assets/SwarmerInActionLight.png")" alt="Swarmer Discord posts">
		</div>
	</div>
</div>

@code
{
	private bool _darkMode;

	protected override Task OnInitializedAsync()
	{
		_darkMode = DMM.DarkMode;
		DMM.DarkModeToggle += OnDmmOnDarkModeToggle;
		return base.OnInitializedAsync();
	}

	private void OnDmmOnDarkModeToggle()
	{
		_darkMode = DMM.DarkMode;
		StateHasChanged();
	}

	public void Dispose() => DMM.DarkModeToggle -= OnDmmOnDarkModeToggle;
}
